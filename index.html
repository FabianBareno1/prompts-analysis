<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Angular Audit</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/zero-md@3?register"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/2.3.4/js/dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/columncontrol/1.1.1/js/dataTables.columnControl.min.js"></script>
  <script src="https://cdn.datatables.net/columncontrol/1.1.1/js/columnControl.dataTables.min.js"></script>
  <link rel="stylesheet" href="./app-theme.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/2.3.4/css/dataTables.dataTables.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/columncontrol/1.1.1/css/columnControl.dataTables.min.css" />
</head>

<body>
  <div class="header-nav-row">
    <header>
      <svg width="60" height="32" viewBox="0 0 60 32" fill="none" xmlns="http://www.w3.org/2000/svg">
        <text x="2" y="30" font-family="Brush Script MT, cursive" font-size="36" font-weight="bold"
          fill="#E11919">R</text>
        <text x="32" y="30" font-family="Brush Script MT, cursive" font-size="36" font-weight="bold"
          fill="#E11919">X</text>
      </svg>
    </header>
    <div class="nav-center-wrapper">
      <nav aria-label="Analysis sections">
        <button id="code-coverage" class="active" aria-label="View Code Coverage analysis" aria-pressed="true"
          role="tab">
          Code Coverage
        </button>
        <button id="test-smells" aria-label="View Test Smells analysis" aria-pressed="false" role="tab">
          Test Smells
        </button>
        <button id="security-posture" aria-label="View Security Posture analysis" aria-pressed="false" role="tab">
          Security Posture
        </button>
        <button id="regression-risk" aria-label="View Regression Risk analysis" aria-pressed="false" role="tab">
          Regression Risk
        </button>
        <button id="semantic-bug-detection" aria-label="View Semantic Bug Detection analysis" aria-pressed="false"
          role="tab">
          Semantic Bug Detection
        </button>
      </nav>
    </div>
  </div>
  <main>
    <div id="summary-table-container" style="margin-bottom:2rem;display:none;"></div>
    <div id="summary-md-container">
      <zero-md id="summary-md" style="display: block" src="" data-theme="dark">
        <template>
          <link rel="stylesheet" href="./github-markdown.css" />
          <link rel="stylesheet" href="./app-theme.css" />
          <style>
            .markdown-body {
              box-sizing: border-box;
              min-width: 200px;
              max-width: 980px;
              margin: 0 auto;
              padding: 32px;
              background: #0d1117 !important;
              color: #e6edf3 !important;
            }

            .markdown-body table,
            .markdown-body tr,
            .markdown-body th,
            .markdown-body td {
              background: #161b22 !important;
              color: #e6edf3 !important;
              border-color: #30363d !important;
            }
          </style>
        </template>
      </zero-md>
    </div>
    <div id="datatable-container">
      <div id="dependencies-datatable">
        <table id="dependencies-table" class="stripe row-border order-column nowrap">
        </table>
      </div>
    </div>
    <div class="chart-area" id="chart-area">
      <div id="file-upload-area">
        <div class="file-upload-group" id="code-coverage-upload"
          style="display: none; align-items: center; gap: 0.3rem;">
          <select id="code-coverage-chart-type" aria-label="Chart type for code coverage"
            class="chart-type-dropdown"></select>
        </div>
        <div class="file-upload-group" id="test-smells-upload" style="display: none; align-items: center; gap: 0.3rem;">
          <select id="test-smells-chart-type" aria-label="Chart type for test smells"
            class="chart-type-dropdown"></select>
        </div>
        <div class="file-upload-group" id="security-posture-upload"
          style="display: none; align-items: center; gap: 0.3rem;">
          <select id="security-posture-chart-type" aria-label="Chart type for Security Posture"
            class="chart-type-dropdown"></select>
        </div>
        <div class="file-upload-group" id="semantic-bug-detection-upload"
          style="display: none; align-items: center; gap: 0.3rem;">
          <select id="semantic-bug-detection-chart-type" aria-label="Chart type for Semantic Bug Detection"
            class="chart-type-dropdown"></select>
        </div>
      </div>
      <svg id="chart" style="width: 100%; height: 100%; position: static; z-index: 1" role="img"
        aria-label="Data chart"></svg>
      <div id="heatmap-container" style="width: 100%; height: auto; display: none"></div>
      <div class="loader" id="loader" aria-live="polite" aria-label="Loading data"></div>
      <div id="csv-summary" style="
            display: none;
            position: absolute;
            top: 70px;
            left: 50%;
            transform: translateX(-50%);
            background: #222;
            color: #fff;
            padding: 1rem 1.5rem;
            border-radius: 0.7rem;
            z-index: 300;
            box-shadow: 0 2px 12px #0008;
            font-size: 1.05rem;
          "></div>
      <div class="error-message" id="error-message" aria-live="polite" hidden></div>
    </div>
  </main>
  <script>

  </script>
  <script type="module" src="./index.js"></script>
  <script type="module" src="./ui.js"></script>
  <script type="module">
    import {
      showHeatmapIfNeeded,
      renderCommitsBarCharts,
      hideCommitsBarCharts,
      renderHeatmap,
      hideHeatmap
    } from './uiHelpers.js';
    showHeatmapIfNeeded();
  </script>
</body>

</html>